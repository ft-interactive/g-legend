!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3"),require("g-chartcolour")):"function"==typeof define&&define.amd?define(["exports","d3","g-chartcolour"],t):t(e.gLegend=e.gLegend||{},e.d3,e.gChartcolour)}(this,function(e,t,r){"use strict";e.legend=function(){function e(e){if(c.length>1||!0===s){let r=0;e.attr("id",(e,t)=>`${f}-l${t}`),e.append("text").attr("id",(e,t)=>`t${t}`).attr("x",1.5*d).attr("y",d/3).attr("class","chart-subtitle").text(e=>e),"rect"===g?e.append("rect").attr("width",1.25*d).attr("height",d/1.5).attr("class","rects").attr("x",0).attr("y",-d/3).style("fill",e=>o(e)):"line"===g?e.append("line").attr("stroke",e=>o(e)).attr("x1",0).attr("x2",d).attr("y1",0).attr("y2",0).attr("class","lines"):"circ"===g&&e.append("circle").style("fill",e=>o(e)).attr("cx",d-d/2.5).attr("cy",0).attr("r",d/2.5).attr("class","circs"),e.attr("transform",(e,a)=>{let n;if("hori"===u){const e=t.select(`#${f}-l0`).node().getBBox().height;return n=a>0?t.select(`#${f}-l${a-1}`).node().getBBox().width+d:0,r+=n,`translate(${r},${e/2})`}return`translate(0,${a*d*1.2})`})}t.selectAll("#legend").on("mouseover",a).call(t.drag().on("start",n).on("drag",i).on("end",l)),e.selectAll(".chart-subtitle").each(function(){t.select(this).attr("id",`${f}legend`)})}function a(){this.style.cursor="pointer"}function n(){t.select(this).raise().classed("active",!0)}function i(){t.select(this).attr("transform",`translate(${t.event.x}, ${t.event.y})`)}function l(){t.select(this).classed("active",!1)}let c=[],s=!1,o=t.scaleOrdinal().range(r.lineWeb).domain(c),d=10,f="",u="hori",g="circ";return e.seriesNames=(t=>(c=t,e)),e.frameName=(t=>(f=t,e)),e.forceLegend=(t=>void 0===t?s:(s=t,e)),e.colourScale=(t=>t?(o=t,e):o),e.colourPalette=(t=>{if("social"===t||"video"===t)o.range(r.lineSocial);else if("webS"===t||"webM"===t||"webMDefault"===t||"webL"===t)"circ"===g||"line"===g?o.range(r.lineWeb):o.range(r.categorical_bar);else if("print"===t)o.range(r.linePrint);else if(t&&t.name&&"scale"===t.name)o=t;else if(void 0===t)return o;return e}),e.rem=(t=>t?(d=t,e):d),e.alignment=(t=>(u=t,e)),e.geometry=(t=>(g=t,e)),e},Object.defineProperty(e,"__esModule",{value:!0})});